<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>yan</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            overflow-y: auto;
            font-family: Arial, sans-serif;
            background: #FFFFFF;
            min-height: 100vh;
        }
        .profile {
            position: relative;
            color: black;
            padding: 15px;
            touch-action: pan-y;
        }
        .avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin-bottom: 10px;
        }
        .stats {
            font-size: 14px;
            margin: 10px 0;
        }
        .music-control {
            background: none;
            border: none;
            width: 90vw;
            height: 50px;
            cursor: pointer;
            display: block;
            margin: 0 auto;
        }
       
        .music-control img {
            width: 100%;
            height: auto;
            display: block;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2px;
        }
        .grid img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        .thumbnail {
            aspect-ratio: 3/4;
            background: #FFFFFF;
            position: relative;
        }
        .folder-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: none;
            background: #000;
            z-index: 1000;
        }
        .folder {
            width: 100%;
            height: 100%;
            position: relative;
        }
        .carousel {
            display: flex;
            transition: transform 0.3s;
        }
        .media-item {
            flex: 0 0 100%;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        video, img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        .close-btn {
            position: absolute;
            top: 30px;
            right: 40px;
            width: 60px;
            height: 60px;
            background-image: url('https://yan-1341045368.cos.ap-beijing.myqcloud.com/yan-t.jpg');
            background-size: cover;
            background-repeat: no-repeat;
            text-indent: -9999px;
            border: none;
            cursor: pointer;
            z-index: 1001;
            border-radius: 50%;
        }
        /* Ê∑ªÂä†Âä†ËΩΩÂä®Áîª */
@keyframes spin {
  to { transform: rotate(360deg); }
}

.loading {
  position: fixed;
  top: 50%;
  left: 50%;
  width: 30px;
  height: 30px;
  border: 3px solid rgba(0,0,0,0.1);
  border-top-color: #000;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}
/* Ê∑ªÂä†ÊªëÂä®ÊèêÁ§∫ÁÆ≠Â§¥ */
.swipe-hint {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  opacity: 0.5;
  animation: bounce 1s infinite;
}

@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

       /* Êñ∞Â¢ûÊªëÂä®ÊèêÁ§∫Ê†∑Âºè */
.swipe-hint {
  position: fixed;
  left: 50%;
  transform: translateX(-50%);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s;
  z-index: 2000;
}

.swipe-up-hint {
  top: 20px;
  background: url(https://example.com/arrow-up.svg) no-repeat center/contain;
  width: 40px;
  height: 40px;
}

.swipe-down-hint {
  bottom: 20px;
  background: url(https://example.com/arrow-down.svg) no-repeat center/contain;
  width: 40px;
  height: 40px;
}

/* ÊªëÂä®Êó∂ÁöÑÂä®ÊÄÅÂèçÈ¶à */
.folder-container::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(255,255,255,0.1);
  opacity: 0;
  transition: opacity 0.3s;
}

.swiping-up .folder-container::after {
  opacity: 1;
  background: linear-gradient(to top, transparent 50%, rgba(0,0,0,0.2) 100%);
}

.swiping-down .folder-container::after {
  opacity: 1;
  background: linear-gradient(to bottom, transparent 50%, rgba(0,0,0,0.2) 100%);
}

/* Ê∑ªÂä†Êñá‰ª∂Â§πÂàáÊç¢Âä®Áîª */
.folder-container {
  transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.swiping-up .folder-container {
  transform: translateY(100vh);
}

.swiping-down .folder-container {
  transform: translateY(-100vh);
}
    </style>
</head>
<body>
    <div class="profile">
        <img src="https://yan-1341045368.cos.ap-beijing.myqcloud.com/yan-t.jpg" class="avatar" alt="Â§¥ÂÉè">
        <h1>Yan.üç£</h1>
        <div class="stats">
            <span></span>
            <span></span>
            <br>
            <button class="music-control" id="musicBtn">
                <img src="https://yan-1341045368.cos.ap-beijing.myqcloud.com/gz.png" alt="Play Music" id="playIcon">
            </button>
        </div>
        <link rel="preload" href="https://yan-1341045368.cos.ap-beijing.myqcloud.com/xht.mp3" as="audio">
        <audio id="bgMusic" loop>
            <source src="https://yan-1341045368.cos.ap-beijing.myqcloud.com/xht.mp3" type="audio/mpeg">
            ÊÇ®ÁöÑÊµèËßàÂô®‰∏çÊîØÊåÅÈü≥È¢ëÊí≠Êîæ„ÄÇ
        </audio>
       <div class="grid">
            <div class="thumbnail" data-folder="1">
                <img src="250113-1.webp" class="thumb" alt="Áº©Áï•Âõæ">
            </div>
            <div class="thumbnail" data-folder="2">
                <img src="241116-0.webp" class="thumb" alt="Áº©Áï•Âõæ">
            </div>
            <div class="thumbnail" data-folder="3">
                <img src="241022-0.webp" class="thumb" alt="Áº©Áï•Âõæ">
            </div>
            <div class="thumbnail" data-folder="4">
                <img src="240912-1.webp" class="thumb" alt="Áº©Áï•Âõæ">
            </div>
            <div class="thumbnail" data-folder="5">
                <img src="240808-1.webp" class="thumb" alt="Áº©Áï•Âõæ">
            </div>
            <div class="thumbnail" data-folder="6">
                <img src="240603-1.webp" class="thumb" alt="Áº©Áï•Âõæ">
            </div>
            <div class="thumbnail" data-folder="7">
                <img src="240501-0.webp" class="thumb" alt="Áº©Áï•Âõæ">
            </div>
            <div class="thumbnail" data-folder="8">
                <img src="240116-0.webp" class="thumb" alt="Áº©Áï•Âõæ">
            </div>        
        </div>
    </div>

    <template id="folderTemplate">
        <div class="folder-container">
            <div class="folder">
                <div class="swipe-hint swipe-up-hint"></div>
                <div class="swipe-hint swipe-down-hint"></div>
                <div class="carousel"></div>
                <div class="date"></div>
                <audio class="bgm"></audio>
                <div class="close-btn">close</div>
                </div>
        </div>
    </template>

   <script>  
const BASE_URL = 'https://yan-1341045368.cos.ap-beijing.myqcloud.com/';  

const foldersData = {  
    1: { bgm: "250113.mp3", media: ["250113-1.webp", "250113-2.webp","250113-3.webp", "250113-4.webp","250113-5.webp", "250113-6.webp", "250113-7.webp"] },  
    2: { bgm: "241116.mp3", media: ["241116-1.mp4", "241116-2.mp4"] },  
    3: { bgm: "241022.mp3", media: ["241022-1.mp4", "241022-2.mp4", "241022-3.mp4", "241022-4.mp4", "241022-5.mp4"] },  
    4: { bgm: "240912.mp3", media: ["240912-1.webp","240912-2.webp"] },  
    5: { bgm: "240808.mp3", media: ["240808-1.webp"] },  
    6: { bgm: "240603.mp3", media: ["240603-1.webp", "240603-2.webp","240603-3.webp"] },  
    7: { bgm: "240501.mp3", media: ["240501-1.mp4", "240501-2.mp4"] },  
    8: { media: ["240116-1.mp4"] }
};  

let currentFolder = null;  
let currentIndex = 0;  
let currentFolderId = null; // ËÆ∞ÂΩïÂΩìÂâçÊñá‰ª∂Â§πID
let isHomeScrollEnabled = true; // ÊéßÂà∂È¶ñÈ°µÊªëÂä®ÊòØÂê¶ÂêØÁî®

document.addEventListener('DOMContentLoaded', function() {
  // Ëé∑ÂèñÊâÄÊúâÁº©Áï•ÂõæÂÖÉÁ¥†
  const thumbs = document.querySelectorAll('.grid .thumb');
  
  // ÂÆö‰πâÂü∫Á°ÄË∑ØÂæÑ
  const basePath = 'https://yan-1341045368.cos.ap-beijing.myqcloud.com/';
  
  // ÈÅçÂéÜÊâÄÊúâÂõæÁâáÂπ∂Êõ¥Êñ∞Ë∑ØÂæÑ
  thumbs.forEach(img => {
    const originalSrc = img.getAttribute('src');
    img.src = basePath + originalSrc;
  });
});

// ÁªëÂÆöÁº©Áï•ÂõæÁÇπÂáª‰∫ã‰ª∂  
document.querySelectorAll('.thumbnail').forEach(thumb => {  
    thumb.addEventListener('click', () => {  
        const folderId = thumb.dataset.folder;  
        openFolder(folderId);  
    });  
});  

// Èü≥‰πêÊéßÂà∂ÈÄªËæë  
const musicBtn = document.getElementById('musicBtn');  
const bgMusic = document.getElementById('bgMusic');  
const playIcon = document.getElementById('playIcon');  
let isMusicPlaying = false;  

musicBtn.addEventListener('click', () => {  
    if (isMusicPlaying) {  
        bgMusic.pause();  
        playIcon.src = BASE_URL + 'gz.png';  
    } else {  
        bgMusic.play();  
        playIcon.src = BASE_URL + 'ygz.png';  
    }  
    isMusicPlaying = !isMusicPlaying;  
});  

// ÊâìÂºÄÊñá‰ª∂Â§π  
function openFolder(folderId) {  
    currentFolderId = parseInt(folderId); // ËÆ∞ÂΩïÂΩìÂâçÊñá‰ª∂Â§πID
    const data = foldersData[folderId];  
    const template = document.getElementById('folderTemplate');  
    const clone = template.content.cloneNode(true);  
    const container = clone.querySelector('.folder-container');  

    // ËÆæÁΩÆËÉåÊôØÈü≥‰πê  
    const bgm = container.querySelector('.bgm');  
    bgm.src = BASE_URL + data.bgm;  
    bgm.loop = true;  

    // ÂàùÂßãÂåñËΩÆÊí≠ÂÜÖÂÆπ  
    const carousel = container.querySelector('.carousel');  
    data.media.forEach(file => {  
        const item = document.createElement('div');  
        item.className = 'media-item';  
        if (file.endsWith('.mp4')) {  
            const video = document.createElement('video');  
            video.loop = true;  
            video.innerHTML = `<source src="${BASE_URL}${file}" type="video/mp4">`;  
            video.addEventListener('loadeddata', () => {  
                video.volume = 1;  
                if (currentIndex === 0) video.play();  
            });  
            item.appendChild(video);  
        } else {  
            const img = document.createElement('img');  
            img.src = BASE_URL + file;  
            item.appendChild(img);  
        }  
        carousel.appendChild(item);  
    });  

    // Ê∑ªÂä†Âà∞È°µÈù¢Âπ∂ÊòæÁ§∫  
    document.body.appendChild(clone);  
    container.style.display = 'block';  
    currentFolder = container;  
    bgm.play();  

    // Á¶ÅÁî®È¶ñÈ°µÊªëÂä®  
    disableHomeScroll();  

    // ÂàùÂßãÂåñÊªëÂä®ÈÄªËæë  
    initSwipe(container);  
}  

// ÂàùÂßãÂåñÊªëÂä®ÈÄªËæë  
function initSwipe(container) {  
    let startX = 0;  
    let startY = 0;  
    let isSwiping = false;  
    let verticalHintTimeout;
    let isFirstInteraction = true;

    container.addEventListener('touchstart', e => {  
        startX = e.touches[0].clientX;  
        startY = e.touches[0].clientY;  
        isSwiping = true;  
        // Êñ∞Â¢ûÔºöÊ∏ÖÈô§È¶ñÊ¨°ÊèêÁ§∫
        if(isFirstInteraction) {
            clearTimeout(verticalHintTimeout);
            isFirstInteraction = false;
        }
    });  

    container.addEventListener('touchmove', e => {  
        if (!isSwiping) return;  
        const deltaX = e.touches[0].clientX - startX;  
        const deltaY = e.touches[0].clientY - startY;
        container.querySelector('.carousel').style.transform = `translateX(${-currentIndex * 100 + deltaX / window.innerWidth * 100}%)`;  
   // Êñ∞Â¢ûÔºöÂÆûÊó∂ÂûÇÁõ¥ÊªëÂä®ÂèçÈ¶à
        if(Math.abs(deltaY) > 50) {
            container.classList.add(deltaY > 0 ? 'swiping-down' : 'swiping-up');
        } else {
            container.classList.remove('swiping-up', 'swiping-down');
        }
        
        container.querySelector('.carousel').style.transform = `translateX(${-currentIndex * 100 + deltaX / window.innerWidth * 100}%)`;  
    });  

    container.addEventListener('touchend', e => { 
        if (!isSwiping) return;  
        isSwiping = false;  

        const deltaX = e.changedTouches[0].clientX - startX;  
        const deltaY = e.changedTouches[0].clientY - startY;  

        // Êñ∞Â¢ûÔºöÁßªÈô§ÊªëÂä®Áä∂ÊÄÅÁ±ª
        container.classList.remove('swiping-up', 'swiping-down');

        if (Math.abs(deltaX) > Math.abs(deltaY)) {  
            // Ê∞¥Âπ≥ÊªëÂä®Â§ÑÁêÜ  
            if (Math.abs(deltaX) > 50) {  
                if (deltaX > 0 && currentIndex > 0) {  
                    currentIndex--;  
                } else if (deltaX < 0 && currentIndex < container.querySelectorAll('.media-item').length - 1) {  
                    currentIndex++;  
                }  
            }  
            container.querySelector('.carousel').style.transform = `translateX(${-currentIndex * 100}%)`;  
            playCurrentMedia();  
        } else {  
            // ÂûÇÁõ¥ÊªëÂä®Â§ÑÁêÜ  
            if (Math.abs(deltaY) > 100) {  
            
            // Ê∑ªÂä†ÂàáÊç¢Âä®ÁîªÁ±ª
    container.classList.add(deltaY > 0 ? 'swiping-up' : 'swiping-down');
    
                closeFolder();  
                let newFolderId = currentFolderId;  
                if (deltaY > 0) {  
                    newFolderId--;  
                    if (newFolderId < 1) newFolderId = 18;  
                } else {  
                    newFolderId++;  
                    if (newFolderId > 18) newFolderId = 1;  
                }  
                setTimeout(() => openFolder(newFolderId.toString()), 10);  
            } else {  
                container.querySelector('.carousel').style.transform = `translateX(${-currentIndex * 100}%)`;  
            }  
        }  
    });  

    // ÂÖ≥Èó≠ÊåâÈíÆÈÄªËæë  
    container.querySelector('.close-btn').addEventListener('click', () => {  
        closeFolder();  
    });  
    
    function showVerticalHint(direction) {
  const container = currentFolder.querySelector('.folder-container');
  container.classList.add(`show-${direction}-hint`);
  
  clearTimeout(verticalHintTimeout);
  verticalHintTimeout = setTimeout(() => {
    container.classList.remove(`show-${direction}-hint`);
  }, 1000);
}
}  

// Êí≠ÊîæÂΩìÂâçÂ™í‰Ωì  
function playCurrentMedia() {  
    const currentItem = currentFolder.querySelectorAll('.media-item')[currentIndex];  
    const video = currentItem.querySelector('video');  
    if (video) {  
        video.currentTime = 0;  
        video.play();  
    }  
}  

// ÂÖ≥Èó≠Êñá‰ª∂Â§π  
function closeFolder() {  
    currentFolder.remove();  
    currentFolder = null;  
    currentIndex = 0;  

    // ÈáçÊñ∞ÂêØÁî®È¶ñÈ°µÊªëÂä®  
    enableHomeScroll();  
}  

// Ëé∑ÂèñÁº©Áï•ÂõæË∑ØÂæÑ  
function getThumbnail(file) {  
    if (file.endsWith('.mp4')) {  
        return file.replace('.mp4', '-0.webp');  
    }  
    return file;  
}  

// Á¶ÅÁî®È¶ñÈ°µÊªëÂä®  
function disableHomeScroll() {  
    isHomeScrollEnabled = false;  
    document.body.style.overflow = 'hidden'; // Á¶ÅÁî®È°µÈù¢ÊªöÂä®  
}  

// ÂêØÁî®È¶ñÈ°µÊªëÂä®  
function enableHomeScroll() {  
    isHomeScrollEnabled = true;  
    document.body.style.overflow = 'auto'; // ÊÅ¢Â§çÈ°µÈù¢ÊªöÂä®  
}  

// ÁõëÂê¨È¶ñÈ°µÊªëÂä®‰∫ã‰ª∂  
document.addEventListener('touchmove', (e) => {  
    if (!isHomeScrollEnabled) {  
        e.preventDefault(); // Â¶ÇÊûúÈ¶ñÈ°µÊªëÂä®Ë¢´Á¶ÅÁî®ÔºåÈòªÊ≠¢ÈªòËÆ§Ë°å‰∏∫  
    }  
}, { passive: false });  

// Â∞ÜÂäüËÉΩÊãÜÂàÜ‰∏∫Ê®°Âùó
const MediaPlayer = {
  init() {
    this.bindEvents();
  },
  
  bindEvents() {
    // ‰∫ã‰ª∂ÁªëÂÆöÈÄªËæë
  }
};

const FolderViewer = {
  // Êñá‰ª∂Â§πÁõ∏ÂÖ≥ÈÄªËæë
};

// Â∞ÜÈÖçÁΩÆÊï∞ÊçÆÁã¨Á´ã
const CONFIG = {
  baseUrl: 'https://yan-1341045368.cos.ap-beijing.myqcloud.com/',
  folders: { /* ... */ },
  defaultAvatar: '241226-t.jpg'
};

// ÊîπËøõÂÖ≥Èó≠ÈÄªËæë
function closeFolder() {
  if (currentFolder) {
    // ÂÅúÊ≠¢ÊâÄÊúâÂ™í‰ΩìÊí≠Êîæ
    currentFolder.querySelectorAll('video, audio').forEach(media => {
      media.pause();
      media.src = '';
      media.load();
    });
    
    currentFolder.remove();
    currentFolder = null;
    currentIndex = 0;
  }
  enableHomeScroll();
}

// Ê∑ªÂä†Â™í‰ΩìÈîôËØØÂ§ÑÁêÜ
function createMediaElement(file) {
  const media = file.endsWith('.mp4') ? 
    document.createElement('video') : 
    document.createElement('img');

  media.onerror = () => {
    console.error('Failed to load:', file);
    media.parentElement?.remove();
  };
  
  return media;
}
</script>  
</body>
</html>