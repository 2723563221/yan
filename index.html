<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Yan.ğŸ£</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            overflow-y: auto;
            font-family: Arial, sans-serif;
            background: #FFFFFF;
            min-height: 100vh;
        }
        .profile {
            position: relative;
            color: black;
            padding: 15px;
            touch-action: pan-y;
        }
        .avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin-bottom: 10px;
        }
        .stats {
            font-size: 14px;
            margin: 10px 0;
        }
        .music-control {
            background: none;
            border: none;
            width: 90vw;
            height: 50px;
            cursor: pointer;
            display: block;
            margin: 0 auto;
        }
       
        .music-control img {
            width: 100%;
            height: auto;
            display: block;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2px;
        }
        .grid img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        .thumbnail {
            aspect-ratio: 3/4;
            background: #FFFFFF;
            position: relative;
        }
        .folder-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: none;
            background: #000;
            z-index: 1000;
        }
        .folder {
            width: 100%;
            height: 100%;
            position: relative;
        }
        
       /* æ–°å¢åº•éƒ¨å®¹å™¨æ ·å¼ */
.folder-footer {
  position: absolute;
  bottom: 40px;
  left: 0;
  width: 100%;
  text-align: left;
  color: white;
  z-index: 1001;
  padding: 0 15px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

/* æ—¥æœŸæ ·å¼ */
.date {
  font-size: 16px;
  margin-bottom: 8px;
  text-shadow: 1px 1px 3px rgba(255,255,255,0.5);
}

/* æè¿°æ–‡å­—æ ·å¼ */
.description {
  font-size: 14px;
  line-height: 1.4;
  opacity: 0.9;
  max-width: 100%;
  margin: 0 auto;
  color: white; /* ç¡®ä¿æ–‡å­—é¢œè‰²ä¸ºç™½è‰² */
  text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5); /* æ·»åŠ æ–‡å­—é˜´å½±æå‡å¯è¯»æ€§ */
}
.folder-footer::before {
  content: "";
  position: absolute;
  bottom: -30px;
  left: 0;
  width: 100%;
  height: 100px;
  background: linear-gradient(to top, rgba(0,0,0,0.6) 20%, transparent);
  pointer-events: none;
  z-index: -1;
}
        .carousel {
            display: flex;
            transition: transform 0.3s;
        }
        .media-item {
            flex: 0 0 100%;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        video, img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        .close-btn {
            position: absolute;
            top: 30px;
            right: 40px;
            width: 60px;
            height: 60px;
            background-image: url('https://yan-1341045368.cos.ap-beijing.myqcloud.com/yan-t.jpg');
            background-size: cover;
            background-repeat: no-repeat;
            text-indent: -9999px;
            border: none;
            cursor: pointer;
            z-index: 1002;
            border-radius: 50%;
        }
        /* æ·»åŠ åŠ è½½åŠ¨ç”» */
@keyframes spin {
  to { transform: rotate(360deg); }
}

.loading {
  position: fixed;
  top: 50%;
  left: 50%;
  width: 30px;
  height: 30px;
  border: 3px solid rgba(0,0,0,0.1);
  border-top-color: #000;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}
/* æ·»åŠ æ»‘åŠ¨æç¤ºç®­å¤´ */
.swipe-hint {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  opacity: 0.5;
  animation: bounce 1s infinite;
}

@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

       /* æ–°å¢æ»‘åŠ¨æç¤ºæ ·å¼ */
.swipe-hint {
  position: fixed;
  left: 50%;
  transform: translateX(-50%);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s;
  z-index: 2000;
}

.swipe-up-hint {
  top: 20px;
  background: url(https://example.com/arrow-up.svg) no-repeat center/contain;
  width: 40px;
  height: 40px;
}

.swipe-down-hint {
  bottom: 20px;
  background: url(https://example.com/arrow-down.svg) no-repeat center/contain;
  width: 40px;
  height: 40px;
}

/* æ»‘åŠ¨æ—¶çš„åŠ¨æ€åé¦ˆ */
.folder-container::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(255,255,255,0.1);
  opacity: 0;
  transition: opacity 0.3s;
}

.swiping-up .folder-container::after {
  opacity: 1;
  background: linear-gradient(to top, transparent 50%, rgba(0,0,0,0.2) 100%);
}

.swiping-down .folder-container::after {
  opacity: 1;
  background: linear-gradient(to bottom, transparent 50%, rgba(0,0,0,0.2) 100%);
}

/* æ·»åŠ æ–‡ä»¶å¤¹åˆ‡æ¢åŠ¨ç”» */
.folder-container {
  transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.swiping-up .folder-container {
  transform: translateY(100vh);
}

.swiping-down .folder-container {
  transform: translateY(-100vh);
}
    </style>
</head>
<body>
    <div class="profile">
        <img src="https://yan-1341045368.cos.ap-beijing.myqcloud.com/yan-t.jpg" class="avatar" alt="å¤´åƒ">
        <h1>Yan.ğŸ£</h1>
        <div class="stats">
            <span></span>
            <span></span>
            <br>
            <button class="music-control" id="musicBtn">
                <img src="https://yan-1341045368.cos.ap-beijing.myqcloud.com/gz.png" alt="Play Music" id="playIcon">
            </button>
        </div>
        <link rel="preload" href="https://yan-1341045368.cos.ap-beijing.myqcloud.com/xht.mp3" as="audio">
        <audio id="bgMusic" loop>
            <source src="https://yan-1341045368.cos.ap-beijing.myqcloud.com/xht.mp3" type="audio/mpeg">
            æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ã€‚
        </audio>
       <div class="grid">
            <div class="thumbnail" data-folder="1">
                <img src="250113-1.webp" class="thumb" alt="ç¼©ç•¥å›¾">
            </div>
            <div class="thumbnail" data-folder="2">
                <img src="241116-0.webp" class="thumb" alt="ç¼©ç•¥å›¾">
            </div>
            <div class="thumbnail" data-folder="3">
                <img src="241022-0.webp" class="thumb" alt="ç¼©ç•¥å›¾">
            </div>
            <div class="thumbnail" data-folder="4">
                <img src="240912-1.webp" class="thumb" alt="ç¼©ç•¥å›¾">
            </div>
            <div class="thumbnail" data-folder="5">
                <img src="240808-1.webp" class="thumb" alt="ç¼©ç•¥å›¾">
            </div>
            <div class="thumbnail" data-folder="6">
                <img src="240603-1.webp" class="thumb" alt="ç¼©ç•¥å›¾">
            </div>
            <div class="thumbnail" data-folder="7">
                <img src="240501-0.webp" class="thumb" alt="ç¼©ç•¥å›¾">
            </div>
            <div class="thumbnail" data-folder="8">
                <img src="240116-0.webp" class="thumb" alt="ç¼©ç•¥å›¾">
            </div>        
        </div>
    </div>

    <template id="folderTemplate">
        <div class="folder-container">
            <div class="folder">
                <div class="swipe-hint swipe-up-hint"></div>
                <div class="swipe-hint swipe-down-hint"></div>
                <div class="carousel"></div>
                <div class="folder-footer">
                <div class="date"></div>
                <div class="description"></div>
                </div>
                <audio class="bgm"></audio>
                <div class="close-btn">close</div>
                </div>
        </div>
    </template>

   <script>  
const BASE_URL = 'https://yan-1341045368.cos.ap-beijing.myqcloud.com/';  

const foldersData = {  
    1: { bgm: "250113.mp3", 
    media: ["250113-1.webp", "250113-2.webp","250113-3.webp", "250113-4.webp","250113-5.webp", "250113-6.webp", "250113-7.webp"],
    description: "æˆ‘å†³å®šåšä¸€ä¸ªç…§ç…§é•œå­å°±èƒ½å¼€å¿ƒä¸€æ•´å¤©çš„äºº#æˆ‘å†³å®šé‡æ–°çˆ±ä¸Šé˜³å…‰#æ¯ä¸€ç§ç”Ÿæ´»éƒ½å€¼å¾—è¢«è®°å½•" },  
    2: { bgm: "241116.mp3", 
    media: ["241116-1.mp4", "241116-2.mp4"],
    description: "å¹¸ç¦æ€»æ˜¯2å€é€Ÿ" },  
    3: { bgm: "241022.mp3", 
    media: ["241022-1.mp4", "241022-2.mp4", "241022-3.mp4", "241022-4.mp4", "241022-5.mp4"],
    description: "æœ‰è¿¹å¯å¾ªçš„moment#å®å®ä½ çœ‹é•œå¤´#ä¸€ç›´åœ¨ä¸€èµ·çš„äººæ‰å€¼å¾—ç‚«è€€"},  
    4: { bgm: "240912.mp3", 
    media: ["240912-1.webp","240912-2.webp"],
    description: "äºæ˜¯ æˆ‘é©»è¶³ã€‚@L"},  
    5: { bgm: "240808.mp3", 
    media: ["240808-1.webp"],
    description: "å†¬å¤©æ¥çš„æ—¶å€™ä½ è¿˜åœ¨ä¸åœ¨#åŸç›¸æœºlive#å†¬å¤©"},  
    6: { bgm: "240603.mp3", 
    media: ["240603-1.webp", "240603-2.webp","240603-3.webp"],
    description: "#ç”Ÿæ´»ç¢ç‰‡è®°å½•" },  
    7: { bgm: "240501.mp3", 
    media: ["240501-1.mp4", "240501-2.mp4"],
    description: "Ohçˆ±æœ¬æ˜¯å°˜åŸƒ#å¤å¤©çš„å‘³é“#åŸç›¸æœº#åˆ†äº«ç…§ç‰‡"},  
    8: { media: ["240116-1.mp4"] ,
    description: "å¹¸ç¦å¼€å§‹æœ‰é¢„å…†"}
};  

let currentFolder = null;  
let currentIndex = 0;  
let currentFolderId = null; // è®°å½•å½“å‰æ–‡ä»¶å¤¹ID
let isHomeScrollEnabled = true; // æ§åˆ¶é¦–é¡µæ»‘åŠ¨æ˜¯å¦å¯ç”¨

document.addEventListener('DOMContentLoaded', function() {
  // è·å–æ‰€æœ‰ç¼©ç•¥å›¾å…ƒç´ 
  const thumbs = document.querySelectorAll('.grid .thumb');
  
  // å®šä¹‰åŸºç¡€è·¯å¾„
  const basePath = 'https://yan-1341045368.cos.ap-beijing.myqcloud.com/';
  
  // éå†æ‰€æœ‰å›¾ç‰‡å¹¶æ›´æ–°è·¯å¾„
  thumbs.forEach(img => {
    const originalSrc = img.getAttribute('src');
    img.src = basePath + originalSrc;
  });
});

// ç»‘å®šç¼©ç•¥å›¾ç‚¹å‡»äº‹ä»¶  
document.querySelectorAll('.thumbnail').forEach(thumb => {  
    thumb.addEventListener('click', () => {  
        const folderId = thumb.dataset.folder;  
        openFolder(folderId);  
    });  
});  

// éŸ³ä¹æ§åˆ¶é€»è¾‘  
const musicBtn = document.getElementById('musicBtn');  
const bgMusic = document.getElementById('bgMusic');  
const playIcon = document.getElementById('playIcon');  
let isMusicPlaying = false;  

musicBtn.addEventListener('click', () => {  
    if (isMusicPlaying) {  
        bgMusic.pause();  
        playIcon.src = BASE_URL + 'gz.png';  
    } else {  
        bgMusic.play();  
        playIcon.src = BASE_URL + 'ygz.png';  
    }  
    isMusicPlaying = !isMusicPlaying;  
});  

function openFolder(folderId) {  
    currentFolderId = parseInt(folderId); // è®°å½•å½“å‰æ–‡ä»¶å¤¹ID
    const data = foldersData[folderId];  
    const template = document.getElementById('folderTemplate');  
    const clone = template.content.cloneNode(true);  
    const container = clone.querySelector('.folder-container');  

    // è®¾ç½®æ—¥æœŸæ–‡æœ¬
    const dateElement = container.querySelector('.date');
    dateElement.textContent = getFormattedDate(folderId);

    // è®¾ç½®æè¿°æ–‡æœ¬
    const descElement = container.querySelector('.description');
    descElement.textContent = data.description || "è®°å½•ç¾å¥½æ—¶å…‰";
    console.log("Description:", data.description); // æ‰“å°æ—¥å¿—

    // è®¾ç½®èƒŒæ™¯éŸ³ä¹  
    const bgm = container.querySelector('.bgm');  
    bgm.src = BASE_URL + (data.bgm || "");  
    bgm.loop = true;  

    // åˆå§‹åŒ–è½®æ’­å†…å®¹  
    const carousel = container.querySelector('.carousel');  
    data.media.forEach(file => {  
        const item = document.createElement('div');  
        item.className = 'media-item';  
        if (file.endsWith('.mp4')) {  
            const video = document.createElement('video');  
            video.loop = true;  
            video.innerHTML = `<source src="${BASE_URL}${file}" type="video/mp4">`;  
            video.addEventListener('loadeddata', () => {  
                video.volume = 1;  
                if (currentIndex === 0) video.play();  
            });  
            item.appendChild(video);  
        } else {  
            const img = document.createElement('img');  
            img.src = BASE_URL + file;  
            item.appendChild(img);  
        }  
        carousel.appendChild(item);  
    });  

    // æ·»åŠ åˆ°é¡µé¢å¹¶æ˜¾ç¤º  
    document.body.appendChild(clone);  
    container.style.display = 'block';  
    currentFolder = container;  
    bgm.play();  

    // ç¦ç”¨é¦–é¡µæ»‘åŠ¨  
    disableHomeScroll();  

    // åˆå§‹åŒ–æ»‘åŠ¨é€»è¾‘  
    initSwipe(container);  
}  
function initSwipe(container) {  
    let startX = 0;  
    let startY = 0;  
    let isSwiping = false;  
    let verticalHintTimeout;
    let isFirstInteraction = true;

    container.addEventListener('touchstart', e => {  
        startX = e.touches[0].clientX;  
        startY = e.touches[0].clientY;  
        isSwiping = true;  
        // æ–°å¢ï¼šæ¸…é™¤é¦–æ¬¡æç¤º
        if(isFirstInteraction) {
            clearTimeout(verticalHintTimeout);
            isFirstInteraction = false;
        }
    });  

    container.addEventListener('touchmove', e => {  
        if (!isSwiping) return;  
        const deltaX = e.touches[0].clientX - startX;  
        const deltaY = e.touches[0].clientY - startY;
        container.querySelector('.carousel').style.transform = `translateX(${-currentIndex * 100 + deltaX / window.innerWidth * 100}%)`;  
   // æ–°å¢ï¼šå®æ—¶å‚ç›´æ»‘åŠ¨åé¦ˆ
        if(Math.abs(deltaY) > 50) {
            container.classList.add(deltaY > 0 ? 'swiping-down' : 'swiping-up');
        } else {
            container.classList.remove('swiping-up', 'swiping-down');
        }
        
        container.querySelector('.carousel').style.transform = `translateX(${-currentIndex * 100 + deltaX / window.innerWidth * 100}%)`;  
    });  

    container.addEventListener('touchend', e => { 
        if (!isSwiping) return;  
        isSwiping = false;  

        const deltaX = e.changedTouches[0].clientX - startX;  
        const deltaY = e.changedTouches[0].clientY - startY;  

        // æ–°å¢ï¼šç§»é™¤æ»‘åŠ¨çŠ¶æ€ç±»
        container.classList.remove('swiping-up', 'swiping-down');

        if (Math.abs(deltaX) > Math.abs(deltaY)) {  
            // æ°´å¹³æ»‘åŠ¨å¤„ç†  
            if (Math.abs(deltaX) > 50) {  
                if (deltaX > 0 && currentIndex > 0) {  
                    currentIndex--;  
                } else if (deltaX < 0 && currentIndex < container.querySelectorAll('.media-item').length - 1) {  
                    currentIndex++;  
                }  
            }  
            container.querySelector('.carousel').style.transform = `translateX(${-currentIndex * 100}%)`;  
            playCurrentMedia();  
        } else {  
            // å‚ç›´æ»‘åŠ¨å¤„ç†  
            if (Math.abs(deltaY) > 100) {  
            
            // æ·»åŠ åˆ‡æ¢åŠ¨ç”»ç±»
    container.classList.add(deltaY > 0 ? 'swiping-up' : 'swiping-down');
    
                closeFolder();  
                let newFolderId = currentFolderId;  
                if (deltaY > 0) {  
                    newFolderId--;  
                    if (newFolderId < 1) newFolderId = 18;  
                } else {  
                    newFolderId++;  
                    if (newFolderId > 18) newFolderId = 1;  
                }  
                setTimeout(() => openFolder(newFolderId.toString()), 10);  
            } else {  
                container.querySelector('.carousel').style.transform = `translateX(${-currentIndex * 100}%)`;  
            }  
        }  
    });  

    // å…³é—­æŒ‰é’®é€»è¾‘  
    container.querySelector('.close-btn').addEventListener('click', () => {  
        closeFolder();  
    });  
    
    function showVerticalHint(direction) {
  const container = currentFolder.querySelector('.folder-container');
  container.classList.add(`show-${direction}-hint`);
  
  clearTimeout(verticalHintTimeout);
  verticalHintTimeout = setTimeout(() => {
    container.classList.remove(`show-${direction}-hint`);
  }, 1000);
}
}  

// æ’­æ”¾å½“å‰åª’ä½“  
function playCurrentMedia() {  
    const currentItem = currentFolder.querySelectorAll('.media-item')[currentIndex];  
    const video = currentItem.querySelector('video');  
    if (video) {  
        video.currentTime = 0;  
        video.play();  
    }  
}  

// å…³é—­æ–‡ä»¶å¤¹  
function closeFolder() {  
    currentFolder.remove();  
    currentFolder = null;  
    currentIndex = 0;  

    // é‡æ–°å¯ç”¨é¦–é¡µæ»‘åŠ¨  
    enableHomeScroll();  
}  

// è·å–ç¼©ç•¥å›¾è·¯å¾„  
function getThumbnail(file) {  
    if (file.endsWith('.mp4')) {  
        return file.replace('.mp4', '-0.webp');  
    }  
    return file;  
}  

function getFormattedDate(folderId) {
  const dateMap = {
    1: "2025å¹´1æœˆ13æ—¥",
    2: "2024å¹´11æœˆ16æ—¥",
    3: "2024å¹´10æœˆ22æ—¥",
    4: "2024å¹´9æœˆ12æ—¥",
    5: "2024å¹´8æœˆ8æ—¥",
    6: "2024å¹´6æœˆ3æ—¥",
    7: "2024å¹´5æœˆ1æ—¥",
    8: "2024å¹´1æœˆ16æ—¥"
  };
  return dateMap[folderId] || "æœªçŸ¥æ—¥æœŸ";
}

// ç¦ç”¨é¦–é¡µæ»‘åŠ¨  
function disableHomeScroll() {  
    isHomeScrollEnabled = false;  
    document.body.style.overflow = 'hidden'; // ç¦ç”¨é¡µé¢æ»šåŠ¨  
}  

// å¯ç”¨é¦–é¡µæ»‘åŠ¨  
function enableHomeScroll() {  
    isHomeScrollEnabled = true;  
    document.body.style.overflow = 'auto'; // æ¢å¤é¡µé¢æ»šåŠ¨  
}  

// ç›‘å¬é¦–é¡µæ»‘åŠ¨äº‹ä»¶  
document.addEventListener('touchmove', (e) => {  
    if (!isHomeScrollEnabled) {  
        e.preventDefault(); // å¦‚æœé¦–é¡µæ»‘åŠ¨è¢«ç¦ç”¨ï¼Œé˜»æ­¢é»˜è®¤è¡Œä¸º  
    }  
}, { passive: false });  

// å°†åŠŸèƒ½æ‹†åˆ†ä¸ºæ¨¡å—
const MediaPlayer = {
  init() {
    this.bindEvents();
  },
  
  bindEvents() {
    // äº‹ä»¶ç»‘å®šé€»è¾‘
  }
};

const FolderViewer = {
  // æ–‡ä»¶å¤¹ç›¸å…³é€»è¾‘
};

// å°†é…ç½®æ•°æ®ç‹¬ç«‹
const CONFIG = {
  baseUrl: 'https://yan-1341045368.cos.ap-beijing.myqcloud.com/',
  folders: { /* ... */ },
  defaultAvatar: '241226-t.jpg'
};

// æ”¹è¿›å…³é—­é€»è¾‘
function closeFolder() {
  if (currentFolder) {
    // åœæ­¢æ‰€æœ‰åª’ä½“æ’­æ”¾
    currentFolder.querySelectorAll('video, audio').forEach(media => {
      media.pause();
      media.src = '';
      media.load();
    });
    
    currentFolder.remove();
    currentFolder = null;
    currentIndex = 0;
  }
  enableHomeScroll();
}

// æ·»åŠ åª’ä½“é”™è¯¯å¤„ç†
function createMediaElement(file) {
  const media = file.endsWith('.mp4') ? 
    document.createElement('video') : 
    document.createElement('img');

  media.onerror = () => {
    console.error('Failed to load:', file);
    media.parentElement?.remove();
  };
  
  return media;
}
</script>  
</body>
</html>
